import $ from"jquery";import*as d3 from"d3";export function peopleGroupEmissions(){this.draw=function(t){function e(t,e,n){var r=t.startAngle,a=n,i=d3.interpolate(t.startAngle,r),o=d3.interpolate(t.endAngle,a);return function(e){return t.startAngle=i(e),t.endAngle=o(e),h(t)}}function n(t,e){return t.append("foreignObject").attr("x",0).attr("y",0).attr("height",s).attr("width",o).append("xhtml:div").html(`<div class="text-center">\n            ${e}\n          </div>`)}function r(t,e,r,i,s){var l=t.append("g").attr("transform",`translate(${o/100*e}, 0)`);l.append("text").text(r);var d=l.append("svg:image").attr("width",o/100*20).attr("height",100).style("cursor","pointer").style("opacity",1).attr("information_text",i).attr("pie_data",s).attr("xlink:href","https://upload.wikimedia.org/wikipedia/commons/d/d8/Person_icon_BLACK-01.svg").style("fill","#69b3a2");l.on("mouseenter",(function(){d.transition().duration(500).attr("width",o/100*25).attr("height",120)})),l.on("mouseleave",(function(){d.transition().duration(500).attr("width",o/100*20).attr("height",100)})),l.on("click",(function(){c.remove(),c=n(u,d.attr("information_text")),a(f,JSON.parse(d.attr("pie_data")))}))}function a(t,n){t.selectAll("path").remove();var r=[{startAngle:0,endAngle:0,innerRadius:0,outerRadius:100,fill:"#F3A54A"}],a=[{startAngle:n.a/100*6.28,endAngle:n.a/100*6.28,innerRadius:0,outerRadius:100,fill:"#CCDE66"}];t.data(r).append("path").attr("d",h).attr("stroke","white").attr("fill","green").transition().duration(1e3).attrTween("d",(function(t){return e(t,0,n.a/100*6.28)}));var i=t.data(a).attr("logging",(function(t){console.log(t)})).append("path").attr("d",h).attr("stroke","white").attr("fill","blue");i.transition().duration(1e3).delay(1e3).attrTween("d",(function(t){return e(t,n.a/100*6.28,6.28)})),t.data(r).enter().append("path").style("fill",(function(t){return t.fill})).attr("d",h).transition().duration(1e3).attrTween("d",(function(t){return e(t,n.a/100*6.28)})),t.data(a).enter().append("path").style("fill",(function(t){return t.fill})).attr("d",h).transition().duration(1e3).attrTween("d",(function(t){return e(t,6.28)}))}let i={top:5,right:5,bottom:5,left:5},o=$(t).width(),s=$(t).height();Math.min(o,s);const l=d3.select(t).append("svg").attr("width",o).attr("height",s).append("g");l.append("g").attr("transform",`translate(${i.left}, ${i.top})`);var d=l.append("g").attr("transform",`translate(${i.left}, ${i.top})`),p=l.append("g").attr("transform",`translate(${i.left}, 100)`),u=l.append("g").attr("transform",`translate(${i.left}, 250)`),f=l.append("g").attr("transform",`translate(${o/2}, 450)`);n(d,"Wer verursacht wie viele CO2-Emissionen?");var c=n(u,"Klicke oben auf eine Bev\xf6lkerungsgruppe!");r(p,0,"1%","Die allerreichsten Menschen verursachen 15 Prozent aller Emissionen.",JSON.stringify({a:15,b:85})),r(p,25,"10%","Die reichen Menschen verursachen 37 Prozent aller Emissionen.",JSON.stringify({a:17,b:83})),r(p,50,"40%","Die Mittelschicht verursacht 41 Prozent aller Emissionen.",JSON.stringify({a:41,b:59})),r(p,75,"50%","Die \xe4rmsten Menschen 7 Prozent aller Emissionen.",JSON.stringify({a:7,b:93}));var h=d3.arc()}}