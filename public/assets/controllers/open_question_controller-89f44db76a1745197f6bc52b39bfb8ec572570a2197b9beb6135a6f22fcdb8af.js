import{Controller}from"@hotwired/stimulus";import*as Ajax from"ajax";export default class extends Controller{static targets=["button","name","output","accountId","exerciseId","exerciseClass","totalPossiblePoints","pointsDeductionForMistake","input","solution"];static values={accountId:Number,totalPossiblePoints:Number,pointsDeductionForMistake:Number,exerciseId:Number,exerciseClass:String,myPoints:Number,solution:Array};connect(){import("jquery_with_setup").then((()=>{}))}disconnect(){}check(){var t=this,e=0,s=this.inputTarget.value.toLowerCase().replace(/\s/g,"");for(let t=0;t<this.solutionValue.length;t++)this.solutionValue[t]===s&&e++;e>0?(this.inputTarget.classList.add("bg-correct-color"),(new Ajax.ajax).updateExerciseHistoryOfAccount(this.accountIdValue,this.exerciseClassValue,this.exerciseIdValue,this.myPointsValue).then((()=>{const t=new CustomEvent("finish_exercise",{detail:{points:this.myPointsValue}});window.dispatchEvent(t)}))):(this.inputTarget.classList.add("bg-wrong-color"),setTimeout((function(){t.inputTarget.classList.remove("bg-wrong-color")}),1e3),this.punishForMistake(),this.inputTarget.value="")}punishForMistake(){this.myPointsValue-this.pointsDeductionForMistakeValue<0?this.myPointsValue=0:this.myPointsValue=this.myPointsValue-this.pointsDeductionForMistakeValue}}