import{Controller}from"@hotwired/stimulus";import*as Ajax from"ajax";export default class extends Controller{static targets=["button","name","output","accountId","exerciseId","exerciseClass","totalPossiblePoints","pointsDeductionForMistake","input","inputClass","solution"];static values={accountId:Number,totalPossiblePoints:Number,pointsDeductionForMistake:Number,exerciseId:Number,exerciseClass:String,myPoints:Number,solution:Array,inputClass:String};connect(){import("jquery_with_setup").then((()=>{}))}disconnect(){}check(){var t=this,s=[...this.solutionValue],e=[];($(this.inputClassValue).map((function(){if(t.solutionValue[parseInt(this.getAttribute("data-input-id"))].split(",").includes(this.value.toLowerCase().replace(/\s/g,"")))this.classList.remove("bg-wrong-color"),this.classList.add("bg-correct-color"),s.splice(s.indexOf(s[this.getAttribute("data-input-id")]),1);else{this.classList.add("bg-wrong-color");var i=this;setTimeout((function(){i.classList.remove("bg-wrong-color"),i.value=""}),2e3),e.push(this.value)}})),0===s.length&&0===e.length)?(new Ajax.ajax).updateExerciseHistoryOfAccount(t.accountIdValue,t.exerciseClassValue,t.exerciseIdValue,t.myPoints).then((()=>{const s=new CustomEvent("finish_exercise",{detail:{points:t.myPointsValue}});window.dispatchEvent(s)})):t.punishForMistake()}punishForMistake(){this.myPointsValue-this.pointsDeductionForMistakeValue<0?this.myPointsValue=0:this.myPointsValue=this.myPointsValue-this.pointsDeductionForMistakeValue}}