import{Controller}from"@hotwired/stimulus";import*as Ajax from"ajax";var myPoints=3,pointsDeductionForMistake=1;export default class extends Controller{static targets=["button","name","output","accountId","exerciseId","exerciseClass","totalPossiblePoints","pointsDeductionForMistake","benefitInput","costInput","benefitOutput","costOutput","tableOutput","fullTable"];connect(){import("jquery_with_setup").then((()=>{myPoints=this.totalPossiblePointsTarget.getAttribute("data-value"),pointsDeductionForMistake=this.pointsDeductionForMistakeTarget.getAttribute("data-value")})),this.benefitInputTarget.addEventListener("input",(()=>{this.convertInputToTable()})),this.costInputTarget.addEventListener("input",(()=>{this.convertInputToTable()}))}disconnect(){this.benefitInputTarget.removeEventListener("input",(()=>{this.convertInputToTable()})),this.costInputTarget.removeEventListener("input",(()=>{this.convertInputToTable()}))}convertInputToTable(){console.log(this.benefitInputTarget);var t=this.benefitInputTarget.value.split(/\r?\n/),e=this.costInputTarget.value.split(/\r?\n/),n=t.concat(e),o=0,s="";n.forEach((t=>{var e=t.split(":"),n=parseInt(e[1],10);isNaN(n)?e[1]="Wert fehlt":o+=n;var a=`\n      <tr>\n        <td>${e[0]}</td>\n        <td>${e[1]}</td>\n      </tr>\n      `;s+=a})),s+=`\n    <tr>\n      <td>Total: </td>\n      <td>${o}</td>\n    </tr>\n    `,this.tableOutputTarget.innerHTML=s}save(){console.log("save"),console.log(this.fullTableTarget),console.log(this.fullTableTarget.outerHTML),(new Ajax.ajax).updateExerciseHistoryOfAccount(this.accountIdTarget.getAttribute("data-value"),this.exerciseClassTarget.getAttribute("data-value"),this.exerciseIdTarget.getAttribute("data-value"),0,this.fullTableTarget.outerHTML).then((()=>{const t=new CustomEvent("correct-answer",{detail:{points:0}});window.dispatchEvent(t)}))}check(){console.log("benefit: "),console.log(this.benefitInputTarget.value),console.log("cost: "),console.log(this.costInputTarget.value)}}