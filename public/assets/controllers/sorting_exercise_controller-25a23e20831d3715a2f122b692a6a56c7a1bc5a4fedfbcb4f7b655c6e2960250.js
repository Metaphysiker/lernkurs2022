import{Controller}from"@hotwired/stimulus";import*as Ajax from"ajax";let sortable;export default class extends Controller{static targets=["name","output","sortable"];static values={accountId:Number,totalPossiblePoints:Number,pointsDeductionForMistake:Number,exerciseId:Number,exerciseClass:String,myPoints:Number,solution:Array};connect(){var t=this;import("sortablejs").then((e=>{sortable=e.Sortable.create(t.sortableTarget)}))}disconnect(){sortable.destroy()}check(){var t=this,e=sortable.toArray(),s=0;for(let t=0;t<this.solutionValue.length;t++)this.solutionValue[t]!==e[t]?(s++,document.querySelector('[data-id="'+this.solutionValue[t]+'"]').classList.add("bg-wrong-color")):(document.querySelector('[data-id="'+this.solutionValue[t]+'"]').classList.remove("bg-wrong-color"),document.querySelector('[data-id="'+this.solutionValue[t]+'"]').classList.add("bg-correct-color"));s>0?t.punishForMistake():(new Ajax.ajax).updateExerciseHistoryOfAccount(this.accountIdValue,this.exerciseClassValue,this.exerciseIdValue,this.myPointsValue).then((()=>{const t=new CustomEvent("finish_exercise",{detail:{points:this.myPointsValue}});window.dispatchEvent(t)}))}punishForMistake(){this.myPointsValue-this.pointsDeductionForMistakeValue<0?this.myPointsValue=0:this.myPointsValue=this.myPointsValue-this.pointsDeductionForMistakeValue}greet(){this.outputTarget.textContent=`Hello, ${this.nameTarget.value}!`}}