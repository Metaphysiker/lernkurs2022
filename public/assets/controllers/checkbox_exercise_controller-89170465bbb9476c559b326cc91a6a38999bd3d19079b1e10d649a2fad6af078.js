import{Controller}from"@hotwired/stimulus";import*as Ajax from"ajax";var myPoints=3,pointsDeductionForMistake=1,solution=[];export default class extends Controller{static targets=["button","name","output","accountId","exerciseId","exerciseClass","totalPossiblePoints","pointsDeductionForMistake","checkboxClass","solution"];connect(){import("jquery_with_setup").then((()=>{myPoints=this.totalPossiblePointsTarget.getAttribute("data-value"),pointsDeductionForMistake=this.pointsDeductionForMistakeTarget.getAttribute("data-value"),solution=this.solutionTarget.getAttribute("data-value").split(",").map(Number)}))}disconnect(){}check(){console.log(myPoints);var t=[...solution],e=[];($("."+this.checkboxClassTarget.getAttribute("data-value")+":checkbox:checked").map((function(){var i=parseInt(this.value);solution.includes(i)?($("#"+this.id).prop("disabled",!0),t.splice(t.indexOf(i),1)):($("#"+this.id).prop("checked",!1),$("#"+this.id).prop("disabled",!0),e.push(i))})),0===t.length&&0===e.length)?(new Ajax.ajax).updateExerciseHistoryOfAccount(this.accountIdTarget.getAttribute("data-value"),this.exerciseClassTarget.getAttribute("data-value"),this.exerciseIdTarget.getAttribute("data-value"),myPoints).then((()=>{const t=new CustomEvent("correct-answer",{detail:{points:myPoints}});window.dispatchEvent(t)})):myPoints-pointsDeductionForMistake<0?myPoints=0:myPoints-=pointsDeductionForMistake}}