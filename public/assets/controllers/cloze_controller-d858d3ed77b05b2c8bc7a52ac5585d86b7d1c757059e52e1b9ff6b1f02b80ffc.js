import{Controller}from"@hotwired/stimulus";import*as Ajax from"ajax";var myPoints=3,pointsDeductionForMistake=1,solution=[];export default class extends Controller{static targets=["button","name","output","accountId","exerciseId","exerciseClass","totalPossiblePoints","pointsDeductionForMistake","input","inputClass","solution"];connect(){import("jquery_with_setup").then((()=>{myPoints=this.totalPossiblePointsTarget.getAttribute("data-value"),pointsDeductionForMistake=this.pointsDeductionForMistakeTarget.getAttribute("data-value"),solution=this.solutionTarget.getAttribute("data-value").split(/\r?\n/),console.log("myPoints"),console.log(myPoints)}))}disconnect(){}check(){var t=[...solution],e=[];($(this.inputClassTarget.getAttribute("data-value")).map((function(){solution[this.getAttribute("data-input-id")].split(",").includes(this.value)?(console.log("REMOVE!"),console.log(t.indexOf(this.value)),t.splice(t.indexOf(t[this.getAttribute("data-input-id")]),1)):(console.log("WRONG!"),e.push(this.value))})),console.log(e),console.log(t),0===t.length&&0===e.length)?(new Ajax.ajax).updateExerciseHistoryOfAccount(this.accountIdTarget.getAttribute("data-value"),this.exerciseClassTarget.getAttribute("data-value"),this.exerciseIdTarget.getAttribute("data-value"),myPoints).then((()=>{const t=new CustomEvent("correct-answer",{detail:{points:myPoints}});window.dispatchEvent(t)})):myPoints-pointsDeductionForMistake<0?myPoints=0:myPoints-=pointsDeductionForMistake}}